<!DOCTYPE html>

<head>
    <meta charset="utf-8">
    <title>Photo Album</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.css">
    <link rel="stylesheet" href="https://cdn.shoelace.style/1.0.0-beta24/shoelace.css">
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css">

    <script type="text/javascript" src="apiGateway/lib/axios/dist/axios.standalone.js"></script>
    <script type="text/javascript" src="apiGateway/lib/CryptoJS/rollups/hmac-sha256.js"></script>
    <script type="text/javascript" src="apiGateway/lib/CryptoJS/rollups/sha256.js"></script>
    <script type="text/javascript" src="apiGateway/lib/CryptoJS/components/hmac.js"></script>
    <script type="text/javascript" src="apiGateway/lib/CryptoJS/components/enc-base64.js"></script>
    <script type="text/javascript" src="apiGateway/lib/url-template/url-template.js"></script>
    <script type="text/javascript" src="apiGateway/lib/apiGatewayCore/sigV4Client.js"></script>
    <script type="text/javascript" src="apiGateway/lib/apiGatewayCore/apiGatewayClient.js"></script>
    <script type="text/javascript" src="apiGateway/lib/apiGatewayCore/simpleHttpClient.js"></script>
    <script type="text/javascript" src="apiGateway/lib/apiGatewayCore/utils.js"></script>
    <script type="text/javascript" src="apiGateway/apigClient.js"></script>

</head>

<body>
    <div class="container" style="max-width: 720px; margin-top: 10px;">
        <div class= "header">
        <h1>Photo Album</h1>
        </div>
        <hr/>
        <div id="error" class="isa_error"></div>

        <div class="input-group">
            <input id="note-textarea" type="text" class="form-control" placeholder="Search for a photo" name="search">
            <div class="input-group-btn">
                <button class="btn btn-default" type="submit" onclick="searchPhoto()"><i class="fa fa-search"></i></button>
            </div>
            <div class="row"></div>
        </div>
        <div></div>
        <div style="margin-top: 30px;">
        </div>

        <div class="row">
            <div class="col">
                <p><button type="button" onclick="runSpeechRecognition()">Speech to Text Voice Search</button> &nbsp; <span id="action"></span></p>
        <div id="output" class="hide"></div>
        <script>
            / JS comes here /
            function runSpeechRecognition() {
                // get output div reference
                var output = document.getElementById("output");
                // get action element reference
                var action = document.getElementById("action");
                // new speech recognition object
                var SpeechRecognition = SpeechRecognition || webkitSpeechRecognition;
                var recognition = new SpeechRecognition();

                // This runs when the speech recognition service starts
                recognition.onstart = function() {
                    action.innerHTML = "<small>listening, please speak...</small>";
                };

                recognition.onspeechend = function() {
                    action.innerHTML = "<small>stopped listening, hope you are done...</small>";
                    recognition.stop();
                }

                // This runs when the speech recognition service returns result
                recognition.onresult = function(event) {
                    var transcript = event.results[0][0].transcript;
                    action.innerHTML = transcript
                    var confidence = event.results[0][0].confidence;
                    document.getElementById("").value()
                    output.innerHTML = "<b>Text:</b> " + transcript + "<br/> <b>Confidence:</b> " + confidence90+"%";
                    output.classList.remove("hide");
                };

                 // start recognition
                 recognition.start();
}
        </script>
    </body>

    <button class="btn btn-default" type="submit" onclick="searchPhotoVoice()"><i class="fa fa-search"></i></button>
            </div>
        </div>
        
        <div class="col-md-9 offset-md-2 mt-5 mb-5">
            <!-- <h3 class="text-center mt-4">OR</h3> -->
            <h4 class="text-center">Upload a new photo</h3>
            <!-- <label for="file_path">Upload file</label> -->
            <input type="file" class="form-control-file" id="file_path" >
            <button class="btn btn-info mt-2" type="submit" onclick="uploadPhoto()">UPLOAD</button>
            <input id="customlabels" type="text" class="form-control" placeholder="Add labels to photo separated by comma or space (optional)" name="search">
        </div>

        <p id ="uploadText"></p>
        <div>
            <div class="banner-section" id="img-container">
                <p id="displaytext"></p>
            </div>
        </div>
    </div>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script src="render.js"></script>

</body>
</html>